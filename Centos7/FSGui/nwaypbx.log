2016/09/02 09:09:49 main.go:42: info [Starting Nway service
] 

2016/09/02 09:09:49 main.go:43: debug [Debug info
] 

2016/09/02 09:09:49 nway_print.go:30: debug [[user=postgres dbname=nwaycc password=Nway2016 host=127.0.0.1 port=5432 sslmode=disable]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Init database successed]] 

2016/09/02 09:09:49 main.go:71: info [Connected to redis server] 

2016/09/02 09:09:49 nway_pbx_runtime.go:39: debug [New a runtime class] 

2016/09/02 09:09:49 nway_pbx_init.go:16: debug [Begin Init runtime ....] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading ... Baseconfig]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT config_name, config_param  FROM call_base_config;]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading... gateways]] 

2016/09/02 09:09:49 nway_pbx_db_gateway.go:21: debug [Get All Gateway groups] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, gateway_group_name  FROM call_gateway_group;]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT gateway_id FROM call_gateway_group_map where gateway_group_id=2]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT gateway_id FROM call_gateway_group_map where gateway_group_id=3]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=1]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=1]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=8]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=8]] 

2016/09/02 09:09:49 nway_pbx_load_gateway.go:18: debug [Load Gateway groups successed] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading ... Dialplans]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[init regex module]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[init regex module]] 

2016/09/02 09:09:49 nway_pbx_load_dialplan.go:19: debug [Load All Dialplan infomations into system] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading Dialplan]] 

2016/09/02 09:09:49 nway_pbx_db_dialplan.go:21: debug [Dialplan] 

2016/09/02 09:09:49 nway_print.go:30: debug [[select id,dialplan_number from call_dialplans where dialplan_enabled=True;]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[[{2 ^80[0-3][0-9]$} {9 ^1[0-6][0-9][0-9]$} {10 ^72(\d+)$} {11 ^2300$} {12 ^3300$} {13 ^73(\d+)$} {14 ^2301$}]]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[To add Dialplan into regex]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 2 ,Number: ^80[0-3][0-9]$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 9 ,Number: ^1[0-6][0-9][0-9]$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 10 ,Number: ^72(\d+)$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 11 ,Number: ^2300$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 12 ,Number: ^3300$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 13 ,Number: ^73(\d+)$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Added Dialplan regex: 14 ,Number: ^2301$]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading ... Fifos]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, fifo_name, fifo_extension, fifo_type, fifo_crycle_id  FROM call_fifo;]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT  extension  FROM call_fifo_map where  fifo_id=1]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading ... Ivrs]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, ivr_menu_name, ivr_menu_extension,  ivr_menu_confirm_key,    ivr_menu_timeout,  ivr_menu_inter_digit_timeout, ivr_menu_max_failures,ivr_menu_max_timeouts, ivr_menu_digit_len,  ivr_menu_enabled, ivr_menu_call_order_id, ivr_menu_greet_long_id, ivr_menu_greet_short_id, ivr_menu_invalid_sound_id,  ivr_menu_ringback_id,  ivr_menu_parent_id FROM call_ivr_menus where ivr_menu_parent_id=0]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[Loading ... Opt]] 

2016/09/02 09:09:49 nway_print.go:30: debug [[SELECT id, name   FROM call_operation]] 

2016/09/02 09:09:49 main.go:78: info [Initialize pbx successed] 

2016/09/02 09:09:49 nway_fs_opt.go:165: debug [Now to run Nway.com.cn FreeSWITCH interface service] 

2016/09/02 09:09:49 nway_fs_opt.go:175: debug [The FreeSWITCH Ip:Port secrit  127.0.0.1:8021 ClueCon] 

2016/09/02 09:09:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:09:49 nway_fs_opt.go:220: error [config file fatal open restful.conf: no such file or directory] 

2016/09/02 09:09:56 main.go:42: info [Starting Nway service
] 

2016/09/02 09:09:56 main.go:43: debug [Debug info
] 

2016/09/02 09:09:56 nway_print.go:30: debug [[user=postgres dbname=nwaycc password=Nway2016 host=127.0.0.1 port=5432 sslmode=disable]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Init database successed]] 

2016/09/02 09:09:56 main.go:71: info [Connected to redis server] 

2016/09/02 09:09:56 nway_pbx_runtime.go:39: debug [New a runtime class] 

2016/09/02 09:09:56 nway_pbx_init.go:16: debug [Begin Init runtime ....] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading ... Baseconfig]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT config_name, config_param  FROM call_base_config;]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading... gateways]] 

2016/09/02 09:09:56 nway_pbx_db_gateway.go:21: debug [Get All Gateway groups] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, gateway_group_name  FROM call_gateway_group;]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT gateway_id FROM call_gateway_group_map where gateway_group_id=2]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT gateway_id FROM call_gateway_group_map where gateway_group_id=3]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=1]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=1]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=8]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, gateway_name, gateway_url, call_prefix, max_call, added_autodial  FROM call_gateway where id=8]] 

2016/09/02 09:09:56 nway_pbx_load_gateway.go:18: debug [Load Gateway groups successed] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading ... Dialplans]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[init regex module]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[init regex module]] 

2016/09/02 09:09:56 nway_pbx_load_dialplan.go:19: debug [Load All Dialplan infomations into system] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading Dialplan]] 

2016/09/02 09:09:56 nway_pbx_db_dialplan.go:21: debug [Dialplan] 

2016/09/02 09:09:56 nway_print.go:30: debug [[select id,dialplan_number from call_dialplans where dialplan_enabled=True;]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[[{2 ^80[0-3][0-9]$} {9 ^1[0-6][0-9][0-9]$} {10 ^72(\d+)$} {11 ^2300$} {12 ^3300$} {13 ^73(\d+)$} {14 ^2301$}]]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[To add Dialplan into regex]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 2 ,Number: ^80[0-3][0-9]$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 9 ,Number: ^1[0-6][0-9][0-9]$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 10 ,Number: ^72(\d+)$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 11 ,Number: ^2300$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 12 ,Number: ^3300$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 13 ,Number: ^73(\d+)$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Added Dialplan regex: 14 ,Number: ^2301$]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading ... Fifos]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, fifo_name, fifo_extension, fifo_type, fifo_crycle_id  FROM call_fifo;]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT  extension  FROM call_fifo_map where  fifo_id=1]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading ... Ivrs]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, ivr_menu_name, ivr_menu_extension,  ivr_menu_confirm_key,    ivr_menu_timeout,  ivr_menu_inter_digit_timeout, ivr_menu_max_failures,ivr_menu_max_timeouts, ivr_menu_digit_len,  ivr_menu_enabled, ivr_menu_call_order_id, ivr_menu_greet_long_id, ivr_menu_greet_short_id, ivr_menu_invalid_sound_id,  ivr_menu_ringback_id,  ivr_menu_parent_id FROM call_ivr_menus where ivr_menu_parent_id=0]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[Loading ... Opt]] 

2016/09/02 09:09:56 nway_print.go:30: debug [[SELECT id, name   FROM call_operation]] 

2016/09/02 09:09:56 main.go:78: info [Initialize pbx successed] 

2016/09/02 09:10:04 nway_print.go:30: debug [[new client: 127.0.0.1:36873]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[fae8ab1e-70a9-11e6-8ad1-af1b77b741a7]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[sent event plain]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[a New call to:  2300 ;  Event_name: CHANNEL_DATA]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Dialplan ===  ^80[0-3][0-9]$   ; String ===  2300]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Dialplan ===  ^1[0-6][0-9][0-9]$   ; String ===  2300]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Dialplan ===  ^72(\d+)$   ; String ===  2300]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Dialplan ===  ^73(\d+)$   ; String ===  2300]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Dialplan ===  ^2300$   ; String ===  2300]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[The Match Dialplan : 11]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[SELECT dialplan_name, dialplan_context, dialplan_number, dialplan_order,    dialplan_enabled, dialplan_continue, is_call_outline  FROM call_dialplans where id=11]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Routing Dialplan: {11 IVR destination_number ^2300$ 3 true false false map[]}]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[process dialplan detail]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[SELECT id,  dialplan_detail_tag, dialplan_detail_data,    dialplan_detail_break, dialplan_detail_type_id, ring_id, outline_gateway,  orderid, is_callout, gateway_group_id  FROM call_dialplan_details where dialplan_id=11 order by orderid]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[DDDD   DD Dialplan detail : map[21:{21 11 IVR 2300  false 7 {8 true} {0 true} {0 true} false {0 true}}]]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Dialplan Data:
 {21 11 IVR 2300  false 7 {8 true} {0 true} {0 true} false {0 true}}]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Into IVR process: 2300]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[SELECT  ring_path   FROM call_rings where id=35]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[ring path: 201682516284GMWJGS.wav     id: 35]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[SELECT  ring_path   FROM call_rings where id=35]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[ring path: 201682516284GMWJGS.wav     id: 35]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[the dtmf: ]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[A new event for dtmf]] 

2016/09/02 09:10:04 nway_print.go:30: debug [[Check dtmf ......]] 

2016/09/02 09:10:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:10:10 nway_print.go:30: debug [[the dtmf : 1]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[Info Info This Ivr Get Dtmf: 1]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[1]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[SELECT id,  ivr_menu_option_digits, ivr_menu_option_param, ivr_menu_option_order,  ivr_menu_option_action_id, ring_id FROM call_ivr_menu_options where ivr_menu_id=9 order by ivr_menu_option_order]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[Add option to options: {11 1 2301 1 7 35}]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[Get ivr detail : map[11:{11 1 2301 1 7 35}]]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[Processing Ivr: map[11:{11 1 2301 1 7 35}]]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[Into IVR process: 2301]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[SELECT  ring_path   FROM call_rings where id=37]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[ring path: 2016825183129GMWJGS.wav     id: 37]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[SELECT  ring_path   FROM call_rings where id=35]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[ring path: 201682516284GMWJGS.wav     id: 35]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[the dtmf: ]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[A new event for dtmf]] 

2016/09/02 09:10:10 nway_print.go:30: debug [[Check dtmf ......]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[the dtmf : 1]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[Info Info This Ivr Get Dtmf: 1]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[1]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[SELECT id,  ivr_menu_option_digits, ivr_menu_option_param, ivr_menu_option_order,  ivr_menu_option_action_id, ring_id FROM call_ivr_menu_options where ivr_menu_id=12 order by ivr_menu_option_order]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[Add option to options: {16 1 1008 0 4 0}]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[Get ivr detail : map[16:{16 1 1008 0 4 0}]]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[Processing Ivr: map[16:{16 1 1008 0 4 0}]]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[Bridge to a phone]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[NwayPbxIvrBridge ----------------------------------------]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[{11 IVR destination_number ^2300$ 3 true false false map[]}]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[<nil>]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[NwayPbxHangup ----------------------------------------]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[<nil>]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[sent event plain]] 

2016/09/02 09:10:12 nway_print.go:30: debug [[.......................................................]] 

2016/09/02 09:10:14 nway_print.go:30: debug [[Read event error: EOF]] 

2016/09/02 09:10:14 nway_fs_process.go:117: debug [hangup] 

2016/09/02 09:10:14 nway_fs_process.go:117: debug [hangup] 

2016/09/02 09:10:14 nway_fs_process.go:137: debug [hangup] 

2016/09/02 09:10:14 nway_fs_process.go:137: debug [hangup] 

2016/09/02 09:10:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:10:30 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:10:30 nway_fs_process.go:263: error [Query redis user fialed: redigo: nil returned] 

2016/09/02 09:10:34 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:10:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:11:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:11:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:11:34 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:11:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:12:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:12:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:12:34 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:12:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:13:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:13:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:13:34 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:13:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:14:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:14:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:14:34 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:14:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:15:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:15:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:15:34 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:15:49 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:16:04 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:16:19 nway_redis.go:88: error [redigo: nil returned] 

2016/09/02 09:16:34 nway_redis.go:88: error [redigo: nil returned] 

